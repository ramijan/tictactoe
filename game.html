<!DOCTYPE html>

<html ng-app="tictactoeApp">
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.2/angular.min.js"></script>
    <script src="https://cdn.firebase.com/js/client/2.0.4/firebase.js"></script>
    <script src="https://cdn.firebase.com/libs/angularfire/0.9.0/angularfire.min.js"></script>
    <script src="js/app.js"></script>
    <link rel="stylesheet" href="css/style.css">
    <style>
      body {
        text-align: center;
        background-repeat: no-repeat;
        background-size: cover;
      }
      table {
        margin: auto;
        margin-top: 20px;
      }
      td {
        width: 100px;
        height: 100px;
        border: 1px solid black;
      }
      .user {
        float: left;
        border: 1px solid black;
      }
      .opponent {
        float: right;
        border: 1px solid black;
      }
      .game-board-container {
        clear: both;
        display: inline-block;
        position: relative;
      }
      .board-button {
        width: 100px;
        height: 100px;
        background-color: peachpuff;
        font-size: 48px;
        outline: none;
        border: 1px solid black;
      }
      .board-button:hover {
        background-color: yellow;
        opacity: .5;
      }
      .game-over-dialog {
        border: 1px solid black;
        border-radius: 5px;
        width: 300px;
        height: 150px;
        background: white;
        position: absolute;
        top: 40%;
        left: 50%;
        margin-top: -75px;
        margin-left: -150px;
        z-index: 9999;
        /*box-shadow: 3px 3px;*/
      }
      .game-over-dialog p {
        margin-top: 20px;
      }

      


    </style>
  </head>
  
  <body ng-controller="MainController">

    {{ game }}<!--for debugging -->
    <br>
    <hr>
    <br>
    <div class="scoreboard">
        <p class="user">{{user}} {{game.playerOne == user ? "P1" : "P2"}}<br> score</p>
        <p class="opponent">{{game.playerOne == user ? "P2" : "P1"}} opponent<br> score</p>
    </div>
    
    <div class="game-board-container">
      <!-- Game board -->
      <table ng-hide="game.needPlayerTwo">
        <tr ng-repeat="row in getBoardSizeArray()">
          <td ng-repeat="column in getBoardSizeArray()">
            <button class="board-button" ng-click="play(row, column)" ng-disabled="game.board[row][button]">{{game.board[row][column]}}</button>
          </td>
        </tr>
      </table>
      <!-- Game over dialog -->
      <div class="game-over-dialog" ng-show="game.gameOver">
        <p>
          Game over.<br>  {{game.playerOneTurn ? game.playerTwo : game.playerOne }} wins! <br><br> Would you like to play again?
        </p>
        <button ng-click="resetBoard()">Yes</button>
        <button ng-click="exit()">No</button>
      </div>
      <!-- Message displayed instead of board while waiting for opponent -->
      <h2 ng-show="game.needPlayerTwo">Waiting for opponent...</h2>
    </div>
    
   

  </body>
</html>